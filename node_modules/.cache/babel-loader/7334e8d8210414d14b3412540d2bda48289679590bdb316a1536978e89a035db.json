{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/steve/OneDrive/Desktop/Todo List/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/steve/OneDrive/Desktop/Todo List/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/steve/OneDrive/Desktop/Todo List/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useEffect,useState}from\"react\";import EditTodo from\"./EditTodo\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ListTodos=function ListTodos(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];var deleteTodo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var _deleteTodo;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:5000/todos/\".concat(id),{method:\"DELETE\"});case 3:_deleteTodo=_context.sent;setTodos(todos.filter(function(todo){return todo.id!==id;}));//no refresh needed\n//console.log(deleteTodo);\n//window.location = \"/\";  // refresh*\n_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function deleteTodo(_x){return _ref.apply(this,arguments);};}();var getTodos=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,jsonData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"http://localhost:5000/todos\");case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:jsonData=_context2.sent;setTodos(jsonData);_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0.message);case 13:case\"end\":return _context2.stop();}},_callee2,null,[[0,10]]);}));return function getTodos(){return _ref2.apply(this,arguments);};}();useEffect(function(){getTodos();},[]);//console.log(todos);\nreturn/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"table\",{class:\"table table-dark table-striped mt-5 text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:todos.map(function(todo){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:todo.description}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(EditTodo,{eTodo:todo})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return deleteTodo(todo.id);},children:\"DELETE\"})})]},todo.id);})})]})});};//export { todos, setTodos };\nexport default ListTodos;","map":{"version":3,"names":["React","Fragment","useEffect","useState","EditTodo","ListTodos","todos","setTodos","deleteTodo","id","fetch","method","filter","todo","console","error","message","getTodos","response","json","jsonData","map","description"],"sources":["C:/Users/steve/OneDrive/Desktop/Todo List/frontend/src/componets/ListTodo.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\n\r\nimport EditTodo from \"./EditTodo\";\r\nconst ListTodos = () => {\r\n\r\n    const [todos, setTodos] = useState([]);\r\n    \r\n    const deleteTodo = async (id) => {\r\n        try {\r\n            \r\n            const deleteTodo = await fetch(`http://localhost:5000/todos/${id}`,{\r\n                method: \"DELETE\"\r\n            });\r\n            \r\n            setTodos(todos.filter(todo => todo.id !== id)); //no refresh needed\r\n            //console.log(deleteTodo);\r\n            //window.location = \"/\";  // refresh*\r\n        } catch (error) {\r\n            console.error(error.message);\r\n        }\r\n    }\r\n\r\n    const getTodos = async () => {\r\n        try {\r\n            \r\n            const response = await fetch(\"http://localhost:5000/todos\")\r\n            const jsonData = await response.json();\r\n\r\n            setTodos(jsonData);\r\n\r\n        } catch (error) {\r\n            console.error(error.message);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getTodos();\r\n    }, [])\r\n\r\n    //console.log(todos);\r\n    return <Fragment>\r\n        <table class=\"table table-dark table-striped mt-5 text-center\">\r\n    <thead>\r\n      <tr>\r\n        {/* <th>ID</th> */}\r\n        <th>Description</th>\r\n        <th>Edit</th>\r\n        <th>Delete</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      {\r\n        todos.map(\r\n            todo => (\r\n                <tr key= {todo.id}>\r\n                    {/* <td>{todo.id}</td> */}\r\n                    <td>{todo.description}</td>\r\n                    <td><EditTodo eTodo = {todo}/></td>\r\n                    <td><button className=\"btn btn-danger\" onClick={() => deleteTodo(todo.id)}>DELETE</button></td>\r\n                </tr>\r\n            )\r\n        )\r\n      }\r\n    </tbody>\r\n  </table>\r\n    </Fragment>;\r\n}\r\n//export { todos, setTodos };\r\nexport default ListTodos;"],"mappings":"waAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAE5D,MAAOC,SAAQ,KAAM,YAAY,CAAC,wFAClC,GAAMC,UAAS,CAAG,QAAZA,UAAS,EAAS,CAEpB,cAA0BF,QAAQ,CAAC,EAAE,CAAC,wCAA/BG,KAAK,eAAEC,QAAQ,eAEtB,GAAMC,WAAU,4FAAG,iBAAOC,EAAE,yKAGKC,MAAK,uCAAgCD,EAAE,EAAG,CAC/DE,MAAM,CAAE,QACZ,CAAC,CAAC,QAFIH,WAAU,eAIhBD,QAAQ,CAACD,KAAK,CAACM,MAAM,CAAC,SAAAC,IAAI,QAAIA,KAAI,CAACJ,EAAE,GAAKA,EAAE,GAAC,CAAC,CAAE;AAChD;AACA;AAAA,+EAEAK,OAAO,CAACC,KAAK,CAAC,YAAMC,OAAO,CAAC,CAAC,mEAEpC,kBAbKR,WAAU,4CAaf,CAED,GAAMS,SAAQ,6FAAG,uMAGcP,MAAK,CAAC,6BAA6B,CAAC,QAArDQ,QAAQ,uCACSA,SAAQ,CAACC,IAAI,EAAE,QAAhCC,QAAQ,gBAEdb,QAAQ,CAACa,QAAQ,CAAC,CAAC,qFAGnBN,OAAO,CAACC,KAAK,CAAC,aAAMC,OAAO,CAAC,CAAC,sEAEpC,kBAXKC,SAAQ,2CAWb,CAEDf,SAAS,CAAC,UAAM,CACZe,QAAQ,EAAE,CACd,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,mBAAO,KAAC,QAAQ,wBACZ,eAAO,KAAK,CAAC,iDAAiD,wBAClE,oCACE,mCAEE,oBAAI,aAAW,EAAK,cACpB,oBAAI,MAAI,EAAK,cACb,oBAAI,QAAM,EAAK,GACZ,EACC,cACR,uBAEIX,KAAK,CAACe,GAAG,CACL,SAAAR,IAAI,qBACA,mCAEI,oBAAKA,IAAI,CAACS,WAAW,EAAM,cAC3B,iCAAI,KAAC,QAAQ,EAAC,KAAK,CAAIT,IAAK,EAAE,EAAK,cACnC,iCAAI,eAAQ,SAAS,CAAC,gBAAgB,CAAC,OAAO,CAAE,yBAAML,WAAU,CAACK,IAAI,CAACJ,EAAE,CAAC,EAAC,UAAC,QAAM,EAAS,EAAK,GAJzFI,IAAI,CAACJ,EAAE,CAKZ,EACR,CACJ,EAEG,GACF,EACK,CACf,CAAC,CACD;AACA,cAAeJ,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}